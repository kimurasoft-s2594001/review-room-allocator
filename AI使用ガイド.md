# AI使用ガイド - Review会議室割り当て案作成

このガイドは、AIがReview会議室割り当て案を作成する際の手順書です。

## 前提条件

このガイドを読んでいるあなた（AI）は、ユーザーからReview会議室の割り当て案作成を依頼されています。

## 実行手順

### ステップ1: プロンプトファイルの読み込み

まず、以下のファイルを読み込んでください：

```
SPレビュー会議室割り当て案作成プロンプト.md
```

このファイルには、Review会議室割り当ての全ロジック、ルール、出力フォーマットが記載されています。

### ステップ2: プロンプトに従った対話開始

プロンプトファイルに記載されている「使用フロー」に従って、ユーザーと対話を開始してください：

1. **初回挨拶**:
   ```
   Review会議室割り当て案を作成します。

   まず、以下のどちらですか？
   1. 新規作成
   2. 既存案の調整
   ```

2. **必要情報の収集**:
   - Review種別（SP前倒しレビュー or SPレビュー）
   - 対象Sprint（例：SP74）
   - Review開始日（例：2025年12月10日）

3. **データファイルの受け取り**:
   - Jira CSVデータ
   - （SPレビューの場合）前回のSP前倒しレビュー割り当て案（PDF/テキスト）

### ステップ3: データ検証（必須）

CSVデータを受け取ったら、以下の順序でチェックしてください：

#### チェック1: 主管部レビュー要否の未記入チェック

```
⚠️ 以下のチケットに「主管部レビュー要否」が記入されていません：

- DPCAPP-XXXXX: チケットタイトル
- ...

これらのチケットは分配対象から除外されます。
問題なければそのまま続行します。
```

#### チェック2: 担当PO欠落チェック

対面Review対象チケットで担当POが空の場合：

```
CSVデータを確認しました。
以下のチケットに担当POが設定されていません。

対面Reviewに必要なため、担当POを補完してください：

■ 担当PO欠落チケット
- DPCAPP-XXXXX: チケットタイトル （チームN, 要（対面））
- ...

以下の形式で担当POを教えてください：
DPCAPP-XXXXX: PO名
```

### ステップ4: 割り当て案の生成

プロンプトファイルに記載されているロジックに従って、会議室割り当て案を生成してください：

**重要な優先順位**:
1. **【最優先】説明者の制約** - 同一Team が複数の部屋で同時Review されないように
2. **【第二優先】POの制約** - 同一POのチケットは同じ部屋に
3. **【第三優先】Review種別** - 主1 > 支援とPOのみ の順

### ステップ5: 出力ファイルの作成

生成した割り当て案を以下の形式でTXTファイルとして出力してください：

**ファイル名**:
- SP前倒しレビュー: `SPXX前倒しレビュー_MMDD.txt`
- SPレビュー: `SPXXレビュー_MMDD.txt`

**保存場所**: `data/` フォルダ

**出力フォーマット**:
```
MM/DD(曜日) HH:MM~ SPXXレビュー種別

================================================================================
【回覧レビュー】
================================================================================

（チケットリスト）

================================================================================
【対面レビュー - 会議室割り当て】
================================================================================

部屋1（PO名のみ or PO名 → PO名 の順で対応）
（チケットリスト）

================================================================================
【PO移動案内】
================================================================================

（移動するPOのみ記載、移動しないPOは記載しない）

================================================================================
【説明者注意】
================================================================================

（説明者が2名必要な場合のみ警告、なければ「該当なし」）

================================================================================
【時間超過警告】
================================================================================

（120分または5票を超える部屋がある場合のみ警告、なければ「該当なし」）

================================================================================
【注意事項】
================================================================================

- 各チケットの予想時間: 20〜30分（平均25分）
- レビュー総時間: 120分（2時間）
- 対面レビュー: 主1（要（対面）） > 支援とPOのみ の順で配置
- 回覧レビュー: 主1（要（回覧）） > 主0（否） の順で配置
- ⚠️ 担当POが在場しないとレビューは開始できません
- ⚠️ 同一POのチケットは可能な限り同一部屋に配置
- ⚠️ 複数POが同一部屋を担当する場合はPOの対応順序に注意
```

## 重要な注意事項

### CSV形式について

**担当チームの列位置**:
- Jira CSVには「カスタム フィールド (担当チーム)」が3列存在（列15, 16, 17）
- **実際のチーム情報は第17列**
- 列15と列16は通常空なので注意

### 用語の統一

- "Review" → **「レビュー」**（日本語）を使用
- "超時" → **「時間超過」**（日本語）を使用

### PO名の表記

英語名を日本語表示名に変換してください（詳細はプロンプトファイルのPO名マッピングを参照）：
- kenta kamimoto → 神本
- yusuke fukuda → 福田
- ryo suzuki → 鈴木良
- など

### チケット形式

```
チーム,種別 URL PO表示名
```

例：
```
T2,主1 https://docomo-common.atlassian.net/browse/DPCAPP-10394 李
```

- 担当POが複数いる場合：カンマ区切り（例：`神本,釘崎`）
- 担当POがいない場合：空欄（何も記載しない）

## トラブルシューティング

### Q: 担当チームが空のチケットがある

A: 第17列を確認してください。第15列ではなく第17列にチーム情報があります。

### Q: 同一チームが複数部屋に分散してしまう

A: 説明者は1名のみです。同一チームのチケットは時間帯が重ならないよう配置するか、同じ部屋に集約してください。

### Q: POが複数部屋を同時に担当している

A: POは1人しかいません。PO順序を調整して、時間帯が重ならないようにしてください。

## 完了確認

以下を確認してから出力してください：

- [ ] データ検証チェック（主管部レビュー要否、担当PO）を実施した
- [ ] 前回レビュー済みチケットを除外した（SPレビューの場合）
- [ ] 説明者の同時対応が発生していない
- [ ] POの時間衝突が発生していない
- [ ] 用語が日本語になっている（レビュー、時間超過警告）
- [ ] PO移動案内に移動しないPOを記載していない
- [ ] ファイル名が正しい形式である
- [ ] data/ フォルダに保存した

---

**このガイドに従って、正確なReview会議室割り当て案を作成してください。**
